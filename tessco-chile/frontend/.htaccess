Options -MultiViews
RewriteEngine On
RewriteBase /

# Proxy a la API y archivos estáticos del backend en Railway
RewriteRule ^api/(.*)$ https://giraldosa-tessco-chile-production.up.railway.app/api/$1 [P,L]
RewriteRule ^uploads/(.*)$ https://giraldosa-tessco-chile-production.up.railway.app/uploads/$1 [P,L]

# Landing por defecto -> Tienda
RewriteRule ^$ /shop/index.html [L]

# Alias amigables específicos
RewriteRule ^home/?$ /home/index.html [L]
RewriteRule ^shop/?$ /shop/index.html [L]
RewriteRule ^product/?$ /product/index.html [L]
RewriteRule ^contact/?$ /contact/index.html [L]
RewriteRule ^cart/?$ /cart/index.html [L]
RewriteRule ^checkout/?$ /checkout/index.html [L]
RewriteRule ^checkout/(success|failure)/?$ /checkout/$1.html [L]
RewriteRule ^login/?$ /auth/login.html [L]
RewriteRule ^register/?$ /auth/register.html [L]
RewriteRule ^user/(profile|orders|wishlist)/?$ /user/$1.html [L]
RewriteRule ^admin/?$ /admin/homepage.html [L]
RewriteRule ^admin/(dashboard|products|orders|categories|users|images)/?$ /admin/$1.html [L]

# Resolver solicitudes a directorios con index.html
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{REQUEST_FILENAME}/index.html -f
RewriteRule ^(.+)$ /$1/index.html [L]

# Fallback final -> Home cuando no exista archivo/carpeta
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /home/index.html [L]

