<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tessco Chile - Tecnología y Accesorios</title>
    <meta name="description" content="Tessco Chile - Tu tienda de tecnología y accesorios. Notebooks, smartphones, accesorios y más al mejor precio.">
  <meta name="keywords" content="tecnologia,accesorios,notebooks,smartphones,chile,tessco">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Custom CSS - DEBE CARGAR DESPUÉS DE BOOTSTRAP -->
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/header.css">
    <link rel="stylesheet" type="text/css" href="../../assets/css/cart-offcanvas.css">
    <style>
        /* Override inmediato para forzar colores naranjas */
        .btn-primary {
            background-color: #FF6B35 !important;
            border-color: #FF6B35 !important;
        }
        .btn-primary:hover {
            background-color: #E55A2B !important;
            border-color: #E55A2B !important;
        }
        .btn-outline-primary {
            color: #FF6B35 !important;
            border-color: #FF6B35 !important;
        }
        .btn-outline-primary:hover {
            background-color: #FF6B35 !important;
            border-color: #FF6B35 !important;
            color: white !important;
        }
        .text-primary {
            color: #FF6B35 !important;
        }
        .bg-primary {
            background-color: #FF6B35 !important;
        }
        .navbar-brand {
            color: #FF6B35 !important;
        }
        .category-icon i {
            color: #FF6B35 !important;
        }
        .card-header.bg-primary {
            background-color: #FF6B35 !important;
        }
        .badge.bg-primary {
            background-color: #FF6B35 !important;
        }
        .h5.text-primary {
            color: #FF6B35 !important;
        }
        .text-primary {
            color: #FF6B35 !important;
        }
        .fas.fa-laptop-code {
            color: #FF6B35 !important;
        }

        /* Hero background */
        .hero-section {
            background-image: url('../../assets/images/hero-bg.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
        }
        .hero-section::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(20,20,20,0.9), rgba(25,25,25,0.75));
            pointer-events: none;
        }
        .hero-section .container {
            position: relative;
            z-index: 1;
        }
    </style>
</head>
<body>
    <!-- Header Component -->
    <div id="header"></div>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <section class="hero-section text-white py-5">
          <div class="container">
                <div class="row align-items-center min-vh-50">
                    <div class="col-lg-6">
                        <h1 class="display-4 fw-bold mb-4">
                            Tecnología de Vanguardia en Chile
                        </h1>
                        <p class="lead mb-4">
                            Descubre la mejor tecnología y accesorios para tu vida digital. 
                            Notebooks, smartphones, accesorios y más al mejor precio.
                        </p>
                        <div class="d-flex gap-3">
                            <a href="/shop" class="btn btn-primary btn-lg px-4">
                                <i class="fas fa-shopping-bag me-2"></i>
                                Ver Productos
                            </a>
                            <a href="/shop" class="btn btn-outline-primary btn-lg px-4">
                                <i class="fas fa-th-large me-2"></i>
                                Explorar Categorías
                            </a>
          </div>
        </div>
                    <div class="col-lg-6 text-center">
                        <div class="hero-image">
                            <i class="fas fa-laptop-code display-1 text-primary opacity-75"></i>
          </div>
        </div>
      </div>
    </div>
  </section>
  
        <!-- Categories Section -->
        <section class="py-5">
    <div class="container">
                <div class="row">
                    <div class="col-12 text-center mb-5">
                        <h2 class="fw-bold mb-3">Nuestras Categorías</h2>
                        <p class="text-muted">Explora nuestra amplia gama de productos tecnológicos</p>
                    </div>
                </div>
                
                <!-- Categorías dinámicas -->
                <div class="row" id="categoriesSection">
                    <div class="col-12 text-center">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Cargando categorías...</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="py-5 bg-light">
            <div class="container">
                <div class="row text-center">
                    <div class="col-md-4 mb-4">
                        <div class="feature-box">
                            <i class="fas fa-shipping-fast text-primary display-4 mb-3"></i>
                            <h5>Envío Gratis</h5>
                            <p class="text-muted">En compras superiores a $50.000</p>
                        </div>
              </div>
                    <div class="col-md-4 mb-4">
                        <div class="feature-box">
                            <i class="fas fa-shield-alt text-primary display-4 mb-3"></i>
                            <h5>Garantía Extendida</h5>
                            <p class="text-muted">Hasta 2 años de garantía en todos los productos</p>
              </div>
            </div>
                    <div class="col-md-4 mb-4">
                        <div class="feature-box">
                            <i class="fas fa-headset text-primary display-4 mb-3"></i>
                            <h5>Soporte 24/7</h5>
                            <p class="text-muted">Atención al cliente cuando la necesites</p>
              </div>
            </div>
      </div>
    </div>
  </section>

  <!-- Productos Destacados -->
  <section class="py-5">
    <div class="container">
      <div class="row">
        <div class="col-12 text-center mb-5">
          <h2 class="fw-bold mb-3">Productos Destacados</h2>
          <p class="text-muted">Descubre nuestros productos más populares</p>
        </div>
      </div>
      
      <!-- Categorías -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="d-flex justify-content-center flex-wrap gap-2" id="categoriesFilter">
            <button class="btn btn-outline-primary active" data-category="">Todas</button>
          </div>
        </div>
      </div>
      
      <!-- Productos -->
      <div class="row" id="featuredProducts">
        <div class="col-12 text-center">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Cargando productos...</span>
          </div>
        </div>
      </div>
      
      <!-- Botón Ver Más -->
      <div class="row mt-4">
        <div class="col-12 text-center">
          <a href="/shop" class="btn btn-primary btn-lg">Ver Todos los Productos</a>
        </div>
      </div>
    </div>
  </section>
    </main>

    <!-- Footer Container -->
    <div id="footer"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="../../config/env.js"></script>
    <script src="../../config/app.js"></script>
    <script src="../../components/footer.js"></script>
    <script src="../../assets/js/logo-loader.js"></script>
    <script src="../../assets/js/smart-navigation.js"></script>
    <script src="../../assets/js/ecommerce-config.js"></script>
    
    <script>
      // Cargar productos destacados
      document.addEventListener('DOMContentLoaded', function() {
        loadFeaturedProducts();
        loadCategories();
        loadCategoriesForSection();
      });

      async function loadCategories() {
        try {
          const apiUrl = (window.config && window.config.apiBaseUrl) || 'http://localhost:4000';
          const response = await fetch(`${apiUrl}/api/categories`);
          if (response.ok) {
            const data = await response.json();
            const categories = data.data || [];
            
            const categoriesFilter = document.getElementById('categoriesFilter');
            categories.forEach(category => {
              const button = document.createElement('button');
              button.className = 'btn btn-outline-primary';
              button.textContent = category.name;
              button.setAttribute('data-category', category.id);
              button.onclick = () => filterProductsByCategory(category.id);
              categoriesFilter.appendChild(button);
            });
          }
        } catch (error) {
          console.error('Error cargando categorías:', error);
        }
      }

      async function loadCategoriesForSection() {
        try {
          const apiUrl = (window.config && window.config.apiBaseUrl) || 'http://localhost:4000';
          const response = await fetch(`${apiUrl}/api/categories`);
          if (response.ok) {
            const data = await response.json();
            const categories = data.data || [];
            
            const categoriesSection = document.getElementById('categoriesSection');
            
            if (categories.length === 0) {
              categoriesSection.innerHTML = `
                <div class="col-12 text-center">
                  <p class="text-muted">No hay categorías disponibles</p>
                </div>
              `;
              return;
            }

            const categoryIcons = {
              'notebooks': 'fas fa-laptop',
              'smartphones': 'fas fa-mobile-alt',
              'accesorios': 'fas fa-headphones',
              'monitores': 'fas fa-desktop',
              'tablets': 'fas fa-tablet-alt',
              'audio': 'fas fa-volume-up',
              'gaming': 'fas fa-gamepad',
              'drones': 'fas fa-drone',
              'default': 'fas fa-microchip'
            };

            categoriesSection.innerHTML = categories.map(category => {
              const iconClass = categoryIcons[category.slug] || categoryIcons.default;
              return `
                <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                  <div class="card h-100 shadow-sm category-card" onclick="window.location.href='/shop?category=${category.id}'" style="cursor: pointer;">
                    <div class="card-body text-center">
                      <i class="${iconClass} text-primary display-4 mb-3"></i>
                      <h5 class="card-title">${category.name}</h5>
                      <p class="card-text text-muted small">${category.description || 'Explora esta categoría'}</p>
                    </div>
                  </div>
                </div>
              `;
            }).join('');
          }
        } catch (error) {
          console.error('Error cargando categorías para sección:', error);
          document.getElementById('categoriesSection').innerHTML = `
            <div class="col-12 text-center">
              <p class="text-muted">Error cargando categorías</p>
            </div>
          `;
        }
      }

      async function loadFeaturedProducts() {
        try {
          const apiUrl = (window.config && window.config.apiBaseUrl) || 'http://localhost:4000';
          const response = await fetch(`${apiUrl}/api/products?limit=8`);
          if (response.ok) {
            const data = await response.json();
            const products = data.data || [];
            
            renderProducts(products);
          } else {
            showNoProducts();
          }
        } catch (error) {
          console.error('Error cargando productos:', error);
          showNoProducts();
        }
      }

      function renderProducts(products) {
        const container = document.getElementById('featuredProducts');
        
        if (products.length === 0) {
          showNoProducts();
          return;
        }

        container.innerHTML = products.map(product => `
          <div class="col-lg-3 col-md-6 mb-4">
            <div class="card h-100 shadow-sm product-card">
              <div class="position-relative">
                ${product.imageUrl ? 
                  `<img src="${product.imageUrl}" class="card-img-top" alt="${product.name}" style="height: 200px; object-fit: cover;">` :
                  `<div class="card-img-top bg-light d-flex align-items-center justify-content-center" style="height: 200px;">
                    <i class="fas fa-image fa-3x text-muted"></i>
                   </div>`
                }
                <div class="position-absolute top-0 end-0 m-2">
                  <span class="badge bg-primary">Nuevo</span>
                </div>
              </div>
              <div class="card-body d-flex flex-column">
                <h6 class="card-title fw-bold">${product.name}</h6>
                <p class="card-text text-muted small flex-grow-1">${product.description ? product.description.substring(0, 80) + '...' : ''}</p>
                <div class="mt-auto">
                  <div class="d-flex justify-content-between align-items-center mb-2">
                    <span class="h5 text-primary mb-0">$${product.price.toLocaleString('es-CL')}</span>
                    <small class="text-muted">${product.category?.name || ''}</small>
                  </div>
                  <div class="d-flex gap-2">
                    <a href="/product/${product.id}" class="btn btn-primary btn-sm flex-grow-1">
                      <i class="fas fa-eye me-1"></i>Ver
                    </a>
                    <button class="btn btn-outline-primary btn-sm" onclick="addToCart('${product.id}')">
                      <i class="fas fa-cart-plus"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `).join('');
      }

      function showNoProducts() {
        const container = document.getElementById('featuredProducts');
        container.innerHTML = `
          <div class="col-12 text-center">
            <div class="py-5">
              <i class="fas fa-box-open fa-3x text-muted mb-3"></i>
              <h5 class="text-muted">No hay productos disponibles</h5>
              <p class="text-muted">Pronto tendremos productos increíbles para ti</p>
            </div>
          </div>
        `;
      }

      function filterProductsByCategory(categoryId) {
        // Actualizar botones activos
        document.querySelectorAll('#categoriesFilter .btn').forEach(btn => {
          btn.classList.remove('active');
        });
        event.target.classList.add('active');

        // Filtrar productos
        const apiUrl = (window.config && window.config.apiBaseUrl) || 'http://localhost:4000';
        const url = categoryId ? 
          `${apiUrl}/api/products?category=${categoryId}&limit=8` :
          `${apiUrl}/api/products?limit=8`;

        fetch(url)
          .then(response => response.json())
          .then(data => {
            const products = data.data || [];
            renderProducts(products);
          })
          .catch(error => {
            console.error('Error filtrando productos:', error);
          });
      }

      function addToCart(productId) {
        // Función para agregar al carrito (implementar más tarde)
        alert('Función de carrito en desarrollo');
      }
    </script>
    
    <!-- Components -->
    <script src="../../components/header.js"></script>
    
    <!-- Auth and Smart Navigation -->
    <script src="../../assets/js/ecommerce-config.js"></script>
    <script src="../../assets/js/auth.js"></script>
    <script src="../../assets/js/smart-navigation.js"></script>
    <script src="../../assets/js/cart-offcanvas.js"></script>

    <!-- Inicializar Header -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        loadHeader({
          activeLink: 'inicio',
          showSearch: true,
          showCart: true,
          showWishlist: true
        });
      });
    </script>
</body>
</html>